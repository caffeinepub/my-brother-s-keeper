{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "User-adjustable Google Maps link zoom preference (local persistence) and shared URL utility",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add a user-facing zoom preference control for Google Maps links and persist the setting locally with a sensible default.",
      "acceptanceCriteria": [
        "A zoom control is available in the UI where map links are shown (at minimum on the Meetup location result panel).",
        "The selected zoom value persists across page reloads (stored locally in the browser).",
        "A default zoom is used when the user has not set a preference.",
        "User-facing text is in English."
      ],
      "file_operations": [
        {
          "path": "frontend/src/lib/mapZoomPreference.ts",
          "operation": "create",
          "description": "Implement a small localStorage-backed preference helper for a Google Maps zoom setting, including: a constant storage key, a default zoom value, safe get/set/clear functions, and basic validation/clamping to an allowed numeric range."
        },
        {
          "path": "frontend/src/components/maps/MapZoomControl.tsx",
          "operation": "create",
          "description": "Create a reusable MapZoomControl component that reads the stored zoom preference on mount, allows adjusting it via a simple UI control (e.g., select or number input), and persists updates via the mapZoomPreference helper. Keep all user-facing labels/help text in English."
        },
        {
          "path": "frontend/src/pages/MeetupPage.tsx",
          "operation": "modify",
          "description": "Add the MapZoomControl to the Meetup location result panel (where the map link is shown) so users can fine-tune the map zoom from that context; initialize it with the default if unset and ensure changes persist locally."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update coordinate-based Google Maps links in MeetupPage and the SOS last-known-location view to include the preferred zoom parameter (or default when unset).",
      "acceptanceCriteria": [
        "MeetupPage map link(s) include the zoom parameter and reflect the user-selected zoom value.",
        "LastKnownLocationCard “View on Google Maps” link includes the zoom parameter and reflects the user-selected zoom value.",
        "If the preference is unset, links use the app’s default zoom."
      ],
      "file_operations": [
        {
          "path": "frontend/src/pages/MeetupPage.tsx",
          "operation": "modify",
          "description": "Replace the current hard-coded Google Maps URL generation for coordinate links so it always includes the zoom parameter driven by the stored preference (falling back to the default when unset). Ensure both open-in-new-tab links and any 'copy map URL' functionality use the same preferred zoom."
        },
        {
          "path": "frontend/src/components/sos/LastKnownLocationCard.tsx",
          "operation": "modify",
          "description": "Update the 'View on Google Maps' coordinate link to include the zoom parameter using the stored preferred zoom (defaulting when unset), keeping the existing behavior of opening Google Maps in a new tab."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Centralize Google Maps URL generation into a shared frontend utility used by both MeetupPage and LastKnownLocationCard.",
      "acceptanceCriteria": [
        "There is a single shared utility used by both MeetupPage and LastKnownLocationCard to build Google Maps URLs.",
        "No duplicate ad-hoc string templates for Google Maps URLs remain in the updated areas."
      ],
      "file_operations": [
        {
          "path": "frontend/src/lib/googleMapsUrl.ts",
          "operation": "create",
          "description": "Create a shared utility for building Google Maps URLs from latitude/longitude and an optional zoom (e.g., a single function that takes latitude, longitude, and optional zoom). Ensure the generated URL consistently applies zoom when provided and remains compatible with current 'open in new tab' behavior."
        },
        {
          "path": "frontend/src/pages/MeetupPage.tsx",
          "operation": "modify",
          "description": "Refactor MeetupPage to use the shared googleMapsUrl utility (and the stored zoom preference) instead of any inline/ad-hoc Google Maps string templates."
        },
        {
          "path": "frontend/src/components/sos/LastKnownLocationCard.tsx",
          "operation": "modify",
          "description": "Refactor LastKnownLocationCard to use the shared googleMapsUrl utility (and the stored zoom preference) instead of inline/ad-hoc Google Maps string templates."
        }
      ]
    }
  ]
}